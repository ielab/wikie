{{ define "libraries" }}
    <!-- Main Quill library -->
    <script src="//cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="//cdn.quilljs.com/1.3.6/quill.min.js"></script>

    <!-- Theme included stylesheets -->
    <link href="//cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

    <link rel="stylesheet" href="//unpkg.com/picnic">
    <style>
        main {
            max-width: 960px;
            margin: auto;
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1">
{{ end }}

{{ define "header" }}
    <div style="overflow: hidden;height: 4em;"> <!-- For Demo, Represents the body -->

        <nav>
            <a href="/w/home" class="brand">
                <span>wikie</span>
            </a>

            <!-- responsive-->
            <input id="bmenub" type="checkbox" class="show">
            <label for="bmenub" class="burger pseudo button">menu</label>

            <div class="menu">
                <form action="/search" method="get">
                    <label><input type="search" name="q" placeholder="search pages"/></label>
                    <input type="submit" style="visibility: hidden; display: none;">
                </form>
            </div>
        </nav>
    </div>
{{ end }}

{{ define "editor" }}
    <div id="editor"></div>
    <script type="text/javascript">
        var Link = Quill.import('formats/link');

        class MyLink extends Link {
            static create(value) {
                let node = super.create(value);
                value = this.sanitize(value);
                node.setAttribute('href', value);
                node.removeAttribute('target');
                return node;
            }
        }

        Quill.register(MyLink);

        var editor = new Quill('#editor', {
            theme: "snow",
            modules: {
                toolbar: [
                    ['bold', 'italic', 'underline', 'strike', 'link'],        // toggled buttons
                    ['blockquote', 'code-block'],

                    [{'list': 'ordered'}, {'list': 'bullet'}],
                    [{'script': 'sub'}, {'script': 'super'}],      // superscript/subscript
                    [{'indent': '-1'}, {'indent': '+1'}],          // outdent/indent

                    [{'header': [1, 2, 3, 4, 5, 6, false]}],

                    [{'color': []}, {'background': []}],          // dropdown with defaults from theme
                    [{'font': []}],
                    [{'align': []}],

                    ['clean']                                         // remove formatting button
                ]
            }
        });  // First matching element will be used
    </script>
{{ end }}

{{ define "blanks" }}
    <script type="text/javascript">
        Array.from(document.querySelectorAll('a[target="_blank"]'))
            .forEach(link => link.removeAttribute('target'));
    </script>
{{ end }}